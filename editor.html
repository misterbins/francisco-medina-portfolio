<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Francisco Medina - Editor de Contenido</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-50 font-inter">
    <div class="min-h-screen">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-gray-900 rounded-full flex items-center justify-center">
                            <span class="text-white font-bold text-sm">FM</span>
                        </div>
                        <div>
                            <h1 class="text-xl font-bold text-gray-900">Editor de Portfolio</h1>
                            <p class="text-sm text-gray-600">Francisco Medina</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3">
                        <button id="previewBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium">
                            <i class="fas fa-eye mr-2"></i>Vista Previa
                        </button>
                        <button id="exportBtn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium">
                            <i class="fas fa-download mr-2"></i>Exportar HTML
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Editor Panel -->
                <div class="space-y-6">
                    <div class="bg-white rounded-lg shadow-sm border p-6">
                        <h2 class="text-lg font-semibold text-gray-900 mb-4">
                            <i class="fas fa-user-circle mr-2 text-blue-600"></i>Información Personal
                        </h2>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nombre Completo</label>
                                <input type="text" id="fullName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="Francisco Medina">
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Subtítulo (ES)</label>
                                    <input type="text" id="subtitleEs" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="Senior Copywriter - Director Creativo">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Subtítulo (EN)</label>
                                    <input type="text" id="subtitleEn" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="Senior Copywriter - Creative Director">
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Tagline (ES)</label>
                                    <textarea id="taglineEs" rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">De redactor a director: Creatividad con visión estratégica</textarea>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Tagline (EN)</label>
                                    <textarea id="taglineEn" rows="2" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">From copywriter to director: Creativity with strategic vision</textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Evolution Section -->
                    <div class="bg-white rounded-lg shadow-sm border p-6">
                        <h2 class="text-lg font-semibold text-gray-900 mb-4">
                            <i class="fas fa-chart-line mr-2 text-green-600"></i>La Evolución
                        </h2>
                        
                        <div id="evolutionContainer" class="space-y-4">
                            <!-- Evolution acts will be dynamically generated -->
                        </div>
                        
                        <button id="addEvolutionBtn" class="mt-4 bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-md text-sm">
                            <i class="fas fa-plus mr-2"></i>Agregar Acto
                        </button>
                    </div>

                    <!-- Services Section -->
                    <div class="bg-white rounded-lg shadow-sm border p-6">
                        <h2 class="text-lg font-semibold text-gray-900 mb-4">
                            <i class="fas fa-briefcase mr-2 text-purple-600"></i>Servicios
                        </h2>
                        
                        <div id="servicesContainer" class="space-y-4">
                            <!-- Services will be dynamically generated -->
                        </div>
                        
                        <button id="addServiceBtn" class="mt-4 bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-md text-sm">
                            <i class="fas fa-plus mr-2"></i>Agregar Servicio
                        </button>
                    </div>

                    <!-- Case Studies Section -->
                    <div class="bg-white rounded-lg shadow-sm border p-6">
                        <h2 class="text-lg font-semibold text-gray-900 mb-4">
                            <i class="fas fa-star mr-2 text-yellow-600"></i>Casos Destacados
                        </h2>
                        
                        <div id="casesContainer" class="space-y-4">
                            <!-- Cases will be dynamically generated -->
                        </div>
                        
                        <button id="addCaseBtn" class="mt-4 bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-2 rounded-md text-sm">
                            <i class="fas fa-plus mr-2"></i>Agregar Caso
                        </button>
                    </div>

                    <!-- Contact Section -->
                    <div class="bg-white rounded-lg shadow-sm border p-6">
                        <h2 class="text-lg font-semibold text-gray-900 mb-4">
                            <i class="fas fa-envelope mr-2 text-red-600"></i>Información de Contacto
                        </h2>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Formspree Form ID</label>
                                <input type="text" id="formspreeId" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="ejemplo: xzbqwrxy">
                                <p class="text-xs text-gray-600 mt-1">ID de tu formulario en Formspree</p>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Título Contacto (ES)</label>
                                    <input type="text" id="contactTitleEs" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="Conversemos">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Título Contacto (EN)</label>
                                    <input type="text" id="contactTitleEn" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="Let's Talk">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Preview Panel -->
                <div class="lg:sticky lg:top-8">
                    <div class="bg-white rounded-lg shadow-sm border">
                        <div class="border-b px-6 py-4">
                            <h3 class="text-lg font-semibold text-gray-900">
                                <i class="fas fa-eye mr-2 text-blue-600"></i>Vista Previa
                            </h3>
                            <div class="flex items-center space-x-2 mt-2">
                                <button id="previewEs" class="bg-blue-600 text-white px-3 py-1 rounded text-sm">Español</button>
                                <button id="previewEn" class="bg-gray-300 text-gray-700 px-3 py-1 rounded text-sm">English</button>
                            </div>
                        </div>
                        
                        <div id="previewContent" class="p-6 max-h-96 overflow-y-auto">
                            <div class="text-center">
                                <h1 class="text-3xl font-bold mb-2">Francisco Medina</h1>
                                <p class="text-gray-600 mb-4">Senior Copywriter - Director Creativo</p>
                                <p class="text-lg">De redactor a director: Creatividad con visión estratégica</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="exportModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-screen overflow-hidden">
                <div class="border-b px-6 py-4 flex justify-between items-center">
                    <h3 class="text-lg font-semibold text-gray-900">Código HTML Generado</h3>
                    <button id="closeModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <p class="text-sm text-gray-600">Copia este código y reemplaza tu archivo index.html en GitHub</p>
                        <button id="copyCodeBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm">
                            <i class="fas fa-copy mr-2"></i>Copiar Código
                        </button>
                    </div>
                    <textarea id="exportedCode" class="w-full h-96 px-3 py-2 border border-gray-300 rounded-md text-xs font-mono" readonly></textarea>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data structure to hold all content
        let portfolioData = {
            personal: {
                fullName: 'Francisco Medina',
                subtitle: {
                    es: 'Senior Copywriter - Director Creativo',
                    en: 'Senior Copywriter - Creative Director'
                },
                tagline: {
                    es: 'De redactor a director: Creatividad con visión estratégica',
                    en: 'From copywriter to director: Creativity with strategic vision'
                }
            },
            evolution: [
                {
                    number: '01',
                    title: { es: 'El Redactor', en: 'The Copywriter' },
                    period: '2009-2012',
                    description: {
                        es: 'Nací laboralmente como redactor publicitario. Aprendiendo el oficio, desarrollando la voz y entendiendo cómo las palabras pueden mover audiencias.',
                        en: 'I was born professionally as an advertising copywriter. Learning the craft, developing voice and understanding how words can move audiences.'
                    }
                },
                {
                    number: '02',
                    title: { es: 'El Estratega', en: 'The Strategist' },
                    period: '2013-2016',
                    description: {
                        es: 'Mutando hacia el mundo digital, adquiriendo nuevos conocimientos que complementan la escritura. Entendiendo el negocio detrás de cada pieza creativa.',
                        en: 'Evolving into the digital world, acquiring new knowledge that complements writing. Understanding the business behind every creative piece.'
                    }
                },
                {
                    number: '03',
                    title: { es: 'El Director', en: 'The Director' },
                    period: '2016-presente',
                    description: {
                        es: 'Liderando equipos creativos, dirigiendo estrategias que funcionan. Las habilidades blandas se convirtieron en mi superpoder para hacer que las ideas cobren vida.',
                        en: 'Leading creative teams, directing strategies that work. Soft skills became my superpower to bring ideas to life.'
                    }
                }
            ],
            services: [
                {
                    title: { es: 'Dirección Creativa', en: 'Creative Direction' },
                    items: [
                        { es: 'Desarrollo de conceptos que venden', en: 'Development of concepts that sell' },
                        { es: 'Liderazgo de equipos creativos', en: 'Creative team leadership' },
                        { es: 'Supervisión de campañas 360°', en: '360° campaign supervision' }
                    ]
                },
                {
                    title: { es: 'Estrategia Digital', en: 'Digital Strategy' },
                    items: [
                        { es: 'Meta Ads strategy', en: 'Meta Ads strategy' },
                        { es: 'Social media strategy', en: 'Social media strategy' },
                        { es: 'Performance creative', en: 'Performance creative' }
                    ]
                },
                {
                    title: { es: 'Consultoría', en: 'Consulting' },
                    items: [
                        { es: 'Auditorías creativas', en: 'Creative audits' },
                        { es: 'Restructuración de equipos', en: 'Team restructuring' },
                        { es: 'Procesos creativos eficientes', en: 'Efficient creative processes' }
                    ]
                }
            ],
            cases: [
                {
                    title: { es: 'Cencosud Digital', en: 'Cencosud Digital' },
                    description: {
                        es: 'Lideré el equipo creativo digital para las cuentas de Jumbo, Santa Isabel y Retail Financiero Cencosud, desarrollando campañas digitales que cumplan objetivos comerciales de manera creativa.',
                        en: 'Led the digital creative team for Jumbo, Santa Isabel and Cencosud Financial Retail accounts, developing digital campaigns that met commercial objectives creatively.'
                    },
                    result: {
                        es: 'Resultado: Campañas digitales exitosas para el grupo retail más grande de Chile',
                        en: 'Result: Successful digital campaigns for Chile\'s largest retail group'
                    }
                },
                {
                    title: { es: 'Advertising Not Dead', en: 'Advertising Not Dead' },
                    description: {
                        es: 'Como Director Creativo desde 2016, he desarrollado estrategias creativas innovadoras que han posicionado a la agencia como referente en creatividad publicitaria.',
                        en: 'As Creative Director since 2016, I have developed innovative creative strategies that have positioned the agency as a reference in advertising creativity.'
                    },
                    result: {
                        es: 'Resultado: 8+ años de liderazgo creativo exitoso',
                        en: 'Result: 8+ years of successful creative leadership'
                    }
                },
                {
                    title: { es: 'SientoCuarenta', en: 'SientoCuarenta' },
                    description: {
                        es: 'Colectivo creativo propio que llevó el ingenio chileno de Twitter más allá de la plataforma, creando un libro de tuits ilustrados y una revista del medio.',
                        en: 'Own creative collective that took Chilean wit from Twitter beyond the platform, creating an illustrated tweet book and a media magazine.'
                    },
                    result: {
                        es: 'Resultado: Proyecto creativo independiente exitoso 2012-2014',
                        en: 'Result: Successful independent creative project 2012-2014'
                    }
                }
            ],
            contact: {
                formspreeId: '',
                title: { es: 'Conversemos', en: 'Let\'s Talk' }
            }
        };

        let currentPreviewLang = 'es';

        // Initialize the editor
        function initializeEditor() {
            loadPersonalInfo();
            renderEvolution();
            renderServices();
            renderCases();
            loadContactInfo();
            updatePreview();
            bindEvents();
        }

        function loadPersonalInfo() {
            document.getElementById('fullName').value = portfolioData.personal.fullName;
            document.getElementById('subtitleEs').value = portfolioData.personal.subtitle.es;
            document.getElementById('subtitleEn').value = portfolioData.personal.subtitle.en;
            document.getElementById('taglineEs').value = portfolioData.personal.tagline.es;
            document.getElementById('taglineEn').value = portfolioData.personal.tagline.en;
        }

        function loadContactInfo() {
            document.getElementById('formspreeId').value = portfolioData.contact.formspreeId;
            document.getElementById('contactTitleEs').value = portfolioData.contact.title.es;
            document.getElementById('contactTitleEn').value = portfolioData.contact.title.en;
        }

        function renderEvolution() {
            const container = document.getElementById('evolutionContainer');
            container.innerHTML = '';
            
            portfolioData.evolution.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'border border-gray-200 rounded-lg p-4';
                div.innerHTML = `
                    <div class="flex justify-between items-center mb-3">
                        <span class="font-medium text-gray-900">Acto ${item.number}</span>
                        <button onclick="removeEvolution(${index})" class="text-red-600 hover:text-red-800">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <input type="text" placeholder="Título (ES)" value="${item.title.es}" 
                               onchange="updateEvolution(${index}, 'title', 'es', this.value)" 
                               class="px-3 py-2 border border-gray-300 rounded text-sm">
                        <input type="text" placeholder="Título (EN)" value="${item.title.en}" 
                               onchange="updateEvolution(${index}, 'title', 'en', this.value)" 
                               class="px-3 py-2 border border-gray-300 rounded text-sm">
                    </div>
                    <input type="text" placeholder="Período" value="${item.period}" 
                           onchange="updateEvolution(${index}, 'period', null, this.value)" 
                           class="w-full px-3 py-2 border border-gray-300 rounded text-sm mt-3">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-3">
                        <textarea placeholder="Descripción (ES)" rows="3" 
                                  onchange="updateEvolution(${index}, 'description', 'es', this.value)" 
                                  class="px-3 py-2 border border-gray-300 rounded text-sm">${item.description.es}</textarea>
                        <textarea placeholder="Descripción (EN)" rows="3" 
                                  onchange="updateEvolution(${index}, 'description', 'en', this.value)" 
                                  class="px-3 py-2 border border-gray-300 rounded text-sm">${item.description.en}</textarea>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function renderServices() {
            const container = document.getElementById('servicesContainer');
            container.innerHTML = '';
            
            portfolioData.services.forEach((service, index) => {
                const div = document.createElement('div');
                div.className = 'border border-gray-200 rounded-lg p-4';
                div.innerHTML = `
                    <div class="flex justify-between items-center mb-3">
                        <span class="font-medium text-gray-900">Servicio ${index + 1}</span>
                        <button onclick="removeService(${index})" class="text-red-600 hover:text-red-800">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
                        <input type="text" placeholder="Título (ES)" value="${service.title.es}" 
                               onchange="updateService(${index}, 'title', 'es', this.value)" 
                               class="px-3 py-2 border border-gray-300 rounded text-sm">
                        <input type="text" placeholder="Título (EN)" value="${service.title.en}" 
                               onchange="updateService(${index}, 'title', 'en', this.value)" 
                               class="px-3 py-2 border border-gray-300 rounded text-sm">
                    </div>
                    <div id="serviceItems${index}" class="space-y-2">
                        ${service.items.map((item, itemIndex) => `
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <input type="text" placeholder="Item (ES)" value="${item.es}" 
                                       onchange="updateServiceItem(${index}, ${itemIndex}, 'es', this.value)" 
                                       class="px-3 py-2 border border-gray-300 rounded text-sm">
                                <div class="flex">
                                    <input type="text" placeholder="Item (EN)" value="${item.en}" 
                                           onchange="updateServiceItem(${index}, ${itemIndex}, 'en', this.value)" 
                                           class="flex-1 px-3 py-2 border border-gray-300 rounded-l text-sm">
                                    <button onclick="removeServiceItem(${index}, ${itemIndex})" 
                                            class="px-3 py-2 bg-red-600 text-white rounded-r text-sm">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <button onclick="addServiceItem(${index})" class="mt-3 bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                        <i class="fas fa-plus mr-1"></i>Agregar Item
                    </button>
                `;
                container.appendChild(div);
            });
        }

        function renderCases() {
            const container = document.getElementById('casesContainer');
            container.innerHTML = '';
            
            portfolioData.cases.forEach((caseItem, index) => {
                const div = document.createElement('div');
                div.className = 'border border-gray-200 rounded-lg p-4';
                div.innerHTML = `
                    <div class="flex justify-between items-center mb-3">
                        <span class="font-medium text-gray-900">Caso ${index + 1}</span>
                        <button onclick="removeCase(${index})" class="text-red-600 hover:text-red-800">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
                        <input type="text" placeholder="Título (ES)" value="${caseItem.title.es}" 
                               onchange="updateCase(${index}, 'title', 'es', this.value)" 
                               class="px-3 py-2 border border-gray-300 rounded text-sm">
                        <input type="text" placeholder="Título (EN)" value="${caseItem.title.en}" 
                               onchange="updateCase(${index}, 'title', 'en', this.value)" 
                               class="px-3 py-2 border border-gray-300 rounded text-sm">
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
                        <textarea placeholder="Descripción (ES)" rows="3" 
                                  onchange="updateCase(${index}, 'description', 'es', this.value)" 
                                  class="px-3 py-2 border border-gray-300 rounded text-sm">${caseItem.description.es}</textarea>
                        <textarea placeholder="Descripción (EN)" rows="3" 
                                  onchange="updateCase(${index}, 'description', 'en', this.value)" 
                                  class="px-3 py-2 border border-gray-300 rounded text-sm">${caseItem.description.en}</textarea>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                        <textarea placeholder="Resultado (ES)" rows="2" 
                                  onchange="updateCase(${index}, 'result', 'es', this.value)" 
                                  class="px-3 py-2 border border-gray-300 rounded text-sm">${caseItem.result.es}</textarea>
                        <textarea placeholder="Resultado (EN)" rows="2" 
                                  onchange="updateCase(${index}, 'result', 'en', this.value)" 
                                  class="px-3 py-2 border border-gray-300 rounded text-sm">${caseItem.result.en}</textarea>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function updatePersonalInfo() {
            portfolioData.personal.fullName = document.getElementById('fullName').value;
            portfolioData.personal.subtitle.es = document.getElementById('subtitleEs').value;
            portfolioData.personal.subtitle.en = document.getElementById('subtitleEn').value;
            portfolioData.personal.tagline.es = document.getElementById('taglineEs').value;
            portfolioData.personal.tagline.en = document.getElementById('taglineEn').value;
            updatePreview();
        }

        function updateContactInfo() {
            portfolioData.contact.formspreeId = document.getElementById('formspreeId').value;
            portfolioData.contact.title.es = document.getElementById('contactTitleEs').value;
            portfolioData.contact.title.en = document.getElementById('contactTitleEn').value;
            updatePreview();
        }

        function updateEvolution(index, field, lang, value) {
            if (lang) {
                portfolioData.evolution[index][field][lang] = value;
            } else {
                portfolioData.evolution[index][field] = value;
            }
            updatePreview();
        }

        function updateService(index, field, lang, value) {
            portfolioData.services[index][field][lang] = value;
            updatePreview();
        }

        function updateServiceItem(serviceIndex, itemIndex, lang, value) {
            portfolioData.services[serviceIndex].items[itemIndex][lang] = value;
            updatePreview();
        }

        function updateCase(index, field, lang, value) {
            portfolioData.cases[index][field][lang] = value;
            updatePreview();
        }

        function addEvolution() {
            const newEvolution = {
                number: String(portfolioData.evolution.length + 1).padStart(2, '0'),
                title: { es: '', en: '' },
                period: '',
                description: { es: '', en: '' }
            };
            portfolioData.evolution.push(newEvolution);
            renderEvolution();
            updatePreview();
        }

        function removeEvolution(index) {
            portfolioData.evolution.splice(index, 1);
            // Renumber
            portfolioData.evolution.forEach((item, i) => {
                item.number = String(i + 1).padStart(2, '0');
            });
            renderEvolution();
            updatePreview();
        }

        function addService() {
            const newService = {
                title: { es: '', en: '' },
                items: [
                    { es: '', en: '' }
                ]
            };
            portfolioData.services.push(newService);
            renderServices();
            updatePreview();
        }

        function removeService(index) {
            portfolioData.services.splice(index, 1);
            renderServices();
            updatePreview();
        }

        function addServiceItem(serviceIndex) {
            portfolioData.services[serviceIndex].items.push({ es: '', en: '' });
            renderServices();
            updatePreview();
        }

        function removeServiceItem(serviceIndex, itemIndex) {
            portfolioData.services[serviceIndex].items.splice(itemIndex, 1);
            renderServices();
            updatePreview();
        }

        function addCase() {
            const newCase = {
                title: { es: '', en: '' },
                description: { es: '', en: '' },
                result: { es: '', en: '' }
            };
            portfolioData.cases.push(newCase);
            renderCases();
            updatePreview();
        }

        function removeCase(index) {
            portfolioData.cases.splice(index, 1);
            renderCases();
            updatePreview();
        }

        function updatePreview() {
            const lang = currentPreviewLang;
            const previewContent = document.getElementById('previewContent');
            
            let evolutionHtml = portfolioData.evolution.map(item => `
                <div class="mb-6">
                    <div class="text-2xl font-light text-gray-400 mb-2">${item.number}</div>
                    <h3 class="text-xl font-semibold mb-2">${item.title[lang]}</h3>
                    <div class="text-sm text-gray-600 mb-2">${item.period}</div>
                    <p class="text-gray-700">${item.description[lang]}</p>
                </div>
            `).join('');
            
            let servicesHtml = portfolioData.services.map(service => `
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-3 border-b-2 border-gray-900 pb-1">${service.title[lang]}</h3>
                    <ul class="space-y-1">
                        ${service.items.map(item => `<li class="text-gray-700">→ ${item[lang]}</li>`).join('')}
                    </ul>
                </div>
            `).join('');
            
            let casesHtml = portfolioData.cases.map(caseItem => `
                <div class="mb-6 pb-4 border-b border-gray-200">
                    <h3 class="text-lg font-semibold mb-2">${caseItem.title[lang]}</h3>
                    <p class="text-gray-700 mb-2">${caseItem.description[lang]}</p>
                    <p class="text-sm italic text-gray-600">${caseItem.result[lang]}</p>
                </div>
            `).join('');
            
            previewContent.innerHTML = `
                <div class="text-center mb-8">
                    <h1 class="text-3xl font-bold mb-2">${portfolioData.personal.fullName}</h1>
                    <p class="text-gray-600 mb-4">${portfolioData.personal.subtitle[lang]}</p>
                    <p class="text-lg">${portfolioData.personal.tagline[lang]}</p>
                </div>
                
                <div class="mb-8">
                    <h2 class="text-2xl font-bold mb-4">${lang === 'es' ? 'La Evolución' : 'The Evolution'}</h2>
                    ${evolutionHtml}
                </div>
                
                <div class="mb-8">
                    <h2 class="text-2xl font-bold mb-4">${lang === 'es' ? 'Servicios' : 'Services'}</h2>
                    ${servicesHtml}
                </div>
                
                <div class="mb-8">
                    <h2 class="text-2xl font-bold mb-4">${lang === 'es' ? 'Casos Destacados' : 'Featured Cases'}</h2>
                    ${casesHtml}
                </div>
                
                <div>
                    <h2 class="text-2xl font-bold mb-4">${portfolioData.contact.title[lang]}</h2>
                    <p class="text-gray-700">Formulario de contacto configurado con Formspree ID: ${portfolioData.contact.formspreeId || 'No configurado'}</p>
                </div>
            `;
        }

        function generateHTML() {
            const formspreeAction = portfolioData.contact.formspreeId ? 
                `https://formspree.io/f/${portfolioData.contact.formspreeId}` : 
                'https://formspree.io/f/TU_FORM_ID';
                
            return `<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${portfolioData.personal.fullName} - Director Creativo</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: #1a1a1a;
            background: #fefefe;
        }

        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
            font-weight: 600;
        }

        h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            line-height: 1.1;
            margin-bottom: 1rem;
        }

        h2 {
            font-size: clamp(2rem, 4vw, 3rem);
            line-height: 1.2;
            margin-bottom: 2rem;
        }

        h3 {
            font-size: clamp(1.5rem, 3vw, 2rem);
            line-height: 1.3;
            margin-bottom: 1rem;
        }

        p {
            font-size: 1.1rem;
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        section {
            padding: 4rem 0;
            border-bottom: 1px solid #eee;
        }

        section:last-child {
            border-bottom: none;
        }

        .language-toggle {
            position: fixed;
            top: 2rem;
            right: 2rem;
            z-index: 1000;
            background: #1a1a1a;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .language-toggle:hover {
            background: #333;
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }

        .hero {
            text-align: center;
            padding: 6rem 0;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 3rem;
            font-weight: 300;
        }

        .evolution-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
            margin: 3rem 0;
        }

        .evolution-item {
            text-align: center;
        }

        .evolution-number {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 300;
            color: #ccc;
            margin-bottom: 1rem;
        }

        .evolution-period {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 4rem;
            margin: 3rem 0;
        }

        .service-item h3 {
            border-bottom: 2px solid #1a1a1a;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .service-item ul {
            list-style: none;
        }

        .service-item li {
            padding: 0.5rem 0;
            font-size: 1rem;
            color: #555;
        }

        .service-item li:before {
            content: "→ ";
            color: #1a1a1a;
            font-weight: bold;
        }

        .cases-grid {
            display: grid;
            gap: 3rem;
            margin: 3rem 0;
        }

        .case-item {
            padding: 2rem 0;
            border-bottom: 1px solid #eee;
        }

        .case-item:last-child {
            border-bottom: none;
        }

        .case-result {
            font-style: italic;
            color: #666;
            margin-top: 1rem;
            font-size: 0.95rem;
        }

        .contact-form {
            max-width: 600px;
            margin: 3rem auto 0;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #333;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid #eee;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #1a1a1a;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .btn-submit {
            background: #1a1a1a;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn-submit:hover {
            background: #333;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 1rem;
            }
            
            .language-toggle {
                top: 1rem;
                right: 1rem;
            }
            
            .services-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .evolution-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
        }
    </style>
</head>
<body>
    <button class="language-toggle" onclick="toggleLanguage()">EN</button>

    <section class="hero">
        <div class="container">
            <h1 id="main-title">${portfolioData.personal.fullName}</h1>
            <p class="subtitle" id="main-subtitle">${portfolioData.personal.subtitle.es}</p>
            <p id="hero-tagline">${portfolioData.personal.tagline.es}</p>
        </div>
    </section>

    <section id="evolution-section">
        <div class="container">
            <h2 id="evolution-title">La Evolución</h2>
            
            <div class="evolution-grid">
                ${portfolioData.evolution.map(item => `
                    <div class="evolution-item">
                        <div class="evolution-number">${item.number}</div>
                        <h3 data-es="${item.title.es}" data-en="${item.title.en}">${item.title.es}</h3>
                        <div class="evolution-period">${item.period}</div>
                        <p data-es="${item.description.es}" data-en="${item.description.en}">${item.description.es}</p>
                    </div>
                `).join('')}
            </div>
        </div>
    </section>

    <section id="services-section">
        <div class="container">
            <h2 id="services-title">Servicios</h2>
            
            <div class="services-grid">
                ${portfolioData.services.map(service => `
                    <div class="service-item">
                        <h3 data-es="${service.title.es}" data-en="${service.title.en}">${service.title.es}</h3>
                        <ul>
                            ${service.items.map(item => `
                                <li data-es="${item.es}" data-en="${item.en}">${item.es}</li>
                            `).join('')}
                        </ul>
                    </div>
                `).join('')}
            </div>
        </div>
    </section>

    <section id="cases-section">
        <div class="container">
            <h2 id="cases-title">Casos Destacados</h2>
            
            <div class="cases-grid">
                ${portfolioData.cases.map(caseItem => `
                    <div class="case-item">
                        <h3 data-es="${caseItem.title.es}" data-en="${caseItem.title.en}">${caseItem.title.es}</h3>
                        <p data-es="${caseItem.description.es}" data-en="${caseItem.description.en}">${caseItem.description.es}</p>
                        <p class="case-result" data-es="${caseItem.result.es}" data-en="${caseItem.result.en}">${caseItem.result.es}</p>
                    </div>
                `).join('')}
            </div>
        </div>
    </section>

    <section id="contact-section">
        <div class="container">
            <h2 id="contact-title" data-es="${portfolioData.contact.title.es}" data-en="${portfolioData.contact.title.en}">${portfolioData.contact.title.es}</h2>
            
            <form class="contact-form" action="${formspreeAction}" method="POST">
                <div class="form-group">
                    <label for="name" id="label-name">Nombre completo</label>
                    <input type="text" id="name" name="name" required>
                </div>
                
                <div class="form-group">
                    <label for="email" id="label-email">Email</label>
                    <input type="email" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="phone" id="label-phone">WhatsApp</label>
                    <input type="tel" id="phone" name="phone">
                </div>
                
                <div class="form-group">
                    <label for="message" id="label-message">Mensaje</label>
                    <textarea id="message" name="message" required></textarea>
                </div>
                
                <button type="submit" class="btn-submit" id="submit-btn">Enviar Mensaje</button>
            </form>
        </div>
    </section>

    <script>
        let currentLang = 'es';
        
        const translations = {
            es: {
                'main-subtitle': '${portfolioData.personal.subtitle.es}',
                'hero-tagline': '${portfolioData.personal.tagline.es}',
                'evolution-title': 'La Evolución',
                'services-title': 'Servicios',
                'cases-title': 'Casos Destacados',
                'contact-title': '${portfolioData.contact.title.es}',
                'label-name': 'Nombre completo',
                'label-email': 'Email',
                'label-phone': 'WhatsApp',
                'label-message': 'Mensaje',
                'submit-btn': 'Enviar Mensaje'
            },
            en: {
                'main-subtitle': '${portfolioData.personal.subtitle.en}',
                'hero-tagline': '${portfolioData.personal.tagline.en}',
                'evolution-title': 'The Evolution',
                'services-title': 'Services',
                'cases-title': 'Featured Cases',
                'contact-title': '${portfolioData.contact.title.en}',
                'label-name': 'Full name',
                'label-email': 'Email',
                'label-phone': 'WhatsApp',
                'label-message': 'Message',
                'submit-btn': 'Send Message'
            }
        };

        function toggleLanguage() {
            const newLang = currentLang === 'es' ? 'en' : 'es';
            const toggleBtn = document.querySelector('.language-toggle');
            
            toggleBtn.textContent = newLang === 'es' ? 'EN' : 'ES';
            
            Object.keys(translations[newLang]).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = translations[newLang][key];
                }
            });
            
            document.querySelectorAll('[data-es][data-en]').forEach(element => {
                element.textContent = element.getAttribute('data-' + newLang);
            });
            
            currentLang = newLang;
        }
    </script>
</body>
</html>`;
        }

        function bindEvents() {
            // Personal info events
            document.getElementById('fullName').addEventListener('input', updatePersonalInfo);
            document.getElementById('subtitleEs').addEventListener('input', updatePersonalInfo);
            document.getElementById('subtitleEn').addEventListener('input', updatePersonalInfo);
            document.getElementById('taglineEs').addEventListener('input', updatePersonalInfo);
            document.getElementById('taglineEn').addEventListener('input', updatePersonalInfo);
            
            // Contact info events
            document.getElementById('formspreeId').addEventListener('input', updateContactInfo);
            document.getElementById('contactTitleEs').addEventListener('input', updateContactInfo);
            document.getElementById('contactTitleEn').addEventListener('input', updateContactInfo);
            
            // Button events
            document.getElementById('addEvolutionBtn').addEventListener('click', addEvolution);
            document.getElementById('addServiceBtn').addEventListener('click', addService);
            document.getElementById('addCaseBtn').addEventListener('click', addCase);
            
            // Preview events
            document.getElementById('previewEs').addEventListener('click', () => {
                currentPreviewLang = 'es';
                document.getElementById('previewEs').className = 'bg-blue-600 text-white px-3 py-1 rounded text-sm';
                document.getElementById('previewEn').className = 'bg-gray-300 text-gray-700 px-3 py-1 rounded text-sm';
                updatePreview();
            });
            
            document.getElementById('previewEn').addEventListener('click', () => {
                currentPreviewLang = 'en';
                document.getElementById('previewEn').className = 'bg-blue-600 text-white px-3 py-1 rounded text-sm';
                document.getElementById('previewEs').className = 'bg-gray-300 text-gray-700 px-3 py-1 rounded text-sm';
                updatePreview();
            });
            
            // Export events
            document.getElementById('exportBtn').addEventListener('click', () => {
                const html = generateHTML();
                document.getElementById('exportedCode').value = html;
                document.getElementById('exportModal').classList.remove('hidden');
            });
            
            document.getElementById('closeModal').addEventListener('click', () => {
                document.getElementById('exportModal').classList.add('hidden');
            });
            
            document.getElementById('copyCodeBtn').addEventListener('click', () => {
                const textarea = document.getElementById('exportedCode');
                textarea.select();
                document.execCommand('copy');
                
                const btn = document.getElementById('copyCodeBtn');
                const originalText = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check mr-2"></i>¡Copiado!';
                btn.className = 'bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm';
                
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.className = 'bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm';
                }, 2000);
            });
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeEditor);
    </script>
</body>
</html>
